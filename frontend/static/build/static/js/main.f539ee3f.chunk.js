(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{67:function(e,t){},74:function(e,t,n){},76:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(26),r=n.n(s),i=(n(73),n(74),n(10)),o=n(6),l=n.n(o),j=n(12),u=n(4),b=(n(76),n(11)),d=n(7),h=n(2),m=n(13),p=n.n(m),x=n(1);n(54);var O=n(86),f=n(89);function v(e){var t=e.article;return Object(x.jsxs)("div",{children:[Object(x.jsxs)("section",{className:"blog-hero-section",children:[Object(x.jsx)("h2",{className:"article-title",children:t.title}),t.image&&Object(x.jsx)("img",{id:"hero-img",src:t.image,alt:"image-for-news-article"})]}),Object(x.jsxs)("section",{className:"text",children:[Object(x.jsxs)("span",{style:{fontStyle:"italic"},className:"author-name-text",children:["submitted by ",Object(x.jsxs)("strong",{children:["@",t.author]})]}),Object(x.jsx)("p",{className:"info",children:t.body})]}),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O.a,{variant:"primary",onClick:e.handleShow,children:"Read more"}),Object(x.jsxs)(f.a,{size:"lg",show:e.lgShow,onHide:function(){return e.setLgShow(!1)},"aria-labelledby":"example-modal-sizes-title-lg",children:[Object(x.jsx)(f.a.Header,{closeButton:!0,children:Object(x.jsx)(f.a.Title,{id:"example-modal-sizes-title-lg",children:t.title})}),Object(x.jsx)(f.a.Body,{children:t.body})]})]})]})}var g={home:"HOM",food:"FOO",fashion:"FAS",local:"LOC",global:"GLO",travel:"TRA"};var y=Object(b.h)((function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(!1),i=Object(u.a)(r,2);i[0],i[1],Object(a.useEffect)((function(){var t=e.match.params.category,n="/api_v1/articles/";function a(){return(a=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log("articles",a),s(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&(n="/api_v1/articles/?category=".concat(g[t])),function(){a.apply(this,arguments)}()}),[]);var o=Object(a.useState)([]),b=Object(u.a)(o,2);return b[0],b[1],Object(x.jsxs)("div",{className:"container mt-5 article-container",children:[Object(x.jsx)("div",{className:"articleholder",children:c.map((function(e){return Object(x.jsx)(v,{article:e})}))}),Object(x.jsx)("aside",{className:"aside-articles",children:c.map((function(e){return Object(x.jsx)("div",{className:"content ",children:Object(x.jsxs)("section",{className:"blog-hero-section",children:[Object(x.jsx)("h4",{className:"article-title",children:e.title}),e.image&&Object(x.jsx)("img",{id:"hero-img",src:e.image,alt:"image-for-news-article"})]})},e.id)}))})]})}));function N(e){var t=Object(a.useState)({title:"",author:"",body:"",image:null}),n=Object(u.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(""),i=Object(u.a)(r,2),o=i[0],b=i[1],m=function(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(d.a)({},n,a))}))},O=function(e){console.warn(e)};function f(e){return v.apply(this,arguments)}function v(){return(v=Object(j.a)(l.a.mark((function t(n){var a,r,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),(a=new FormData).append("title",c.title),a.append("body",c.body),a.append("image",c.image),a.append("phase",n.target.value),r={method:"POST",headers:{"X-CSRFToken":p.a.get("csrftoken")},body:a},t.next=9,fetch("/api_v1/articles/",r).catch(O);case 9:if(i=t.sent){t.next=14;break}console.log(i),t.next=18;break;case 14:return t.next=16,i.json();case 16:o=t.sent,s(o);case 18:e.history.push("/drafts");case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("form",{className:"mt-5 col-8 container",children:[Object(x.jsx)("label",{className:"article-form-label",children:"Submit an Article"}),Object(x.jsx)("p",{className:"hear",children:"we want to hear about it."}),Object(x.jsx)("input",{onChange:m,value:c.title,className:"form-control",name:"title",type:"text",placeholder:"Title here."}),Object(x.jsx)("textarea",{onChange:m,value:c.body,className:"form-control",name:"body",type:"text",placeholder:"Body text here."}),Object(x.jsx)("input",{onChange:function(e){var t=e.target.files[0];s(Object(h.a)(Object(h.a)({},c),{},{image:t}));var n=new FileReader;n.onloadend=function(){b(n.result)},n.readAsDataURL(t)},type:"file",className:"form-control"}),c.image&&Object(x.jsx)("img",{src:o,alt:""}),Object(x.jsx)("button",{type:"button",className:"btn btn-save mt-3",name:"DRA",value:"DRA",onClick:f,children:"Save as Draft"}),Object(x.jsx)("button",{type:"button",className:"btn btn-pub mt-3",name:"DRA",value:"SUB",onClick:f,children:"Submit for Publishing"})]})})}function k(e){var t=Object(a.useState)({username:"",email:"",password1:"",password2:""}),n=Object(u.a)(t,2),c=n[0],s=n[1],r=b.g,i=Object(a.useState)(null),o=Object(u.a)(i,2),m=o[0],O=o[1];function f(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(d.a)({},n,a))}))}function v(e){console.warn(e)}function g(){return(g=Object(j.a)(l.a.mark((function e(t){var n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c.password1===c.password2){e.next=5;break}O("Passwords do not match!"),e.next=18;break;case 5:return n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":p.a.get("csrftoken")},body:JSON.stringify(c)},e.next=8,fetch("/rest-auth/registration/",n).catch(v);case 8:if(a=e.sent){e.next=13;break}console.log(a),e.next=18;break;case 13:return e.next=15,a.json();case 15:s=e.sent,p.a.set("Authorization","Token".concat(s.key)),r.push("/");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("form",{className:"mt-3 col-6 ",onSubmit:function(e){return g.apply(this,arguments)},children:[Object(x.jsxs)("div",{className:"form-group text-left mb-3 ",children:[Object(x.jsx)("label",{htmlFor:"username",children:"username"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"enter username.",onChange:f,required:!0,name:"username",value:c.username})]}),Object(x.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(x.jsx)("label",{htmlFor:"email",children:"email"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"email",placeholder:"enter email.",onChange:f,required:!0,name:"email",value:c.email})]}),Object(x.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(x.jsx)("label",{htmlFor:"password1",children:"password"}),Object(x.jsx)("input",{type:"password",className:"form-control",id:"password1",placeholder:"enter password.",onChange:f,required:!0,name:"password1",value:c.password1})]}),Object(x.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(x.jsx)("label",{htmlFor:"password2",children:"confirm password"}),Object(x.jsx)("input",{type:"password",className:"form-control",id:"password2",placeholder:"confirm password.",onChange:f,required:!0,name:"password2",value:c.password2}),m&&Object(x.jsx)("span",{className:"text-danger",children:m})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Register"})]})})}var w=Object(b.h)((function(e){var t=Object(a.useState)({username:"",password:""}),n=Object(u.a)(t,2),c=n[0],s=n[1];function r(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(d.a)({},n,a))}))}function i(e){console.warn(e)}function o(){return(o=Object(j.a)(l.a.mark((function t(n){var a,s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":p.a.get("csrftoken")},body:JSON.stringify(c)},t.next=4,fetch("/rest-auth/login/",a).catch(i);case 4:if(s=t.sent){t.next=9;break}console.log(s),t.next=15;break;case 9:return t.next=11,s.json();case 11:r=t.sent,p.a.set("Authorization","Token".concat(r.key)),e.setIsAuth(!0),e.history.push("/");case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(x.jsxs)("form",{className:"mt-3 col-6 container",onSubmit:function(e){return o.apply(this,arguments)},children:[Object(x.jsx)("div",{className:"form-group text-left mb-3",children:Object(x.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"enter username.",onChange:r,required:!0,name:"username",value:c.username})}),Object(x.jsx)("div",{className:"form-group text-left mb-3",children:Object(x.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"enter password.",onChange:r,required:!0,name:"password",value:c.password})}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Login"}),Object(x.jsx)("button",{type:"button",className:"btn btn-primary mt-3 register-here-button",onClick:function(){e.history.push("/registration")},children:"Click to register."})]})})),S=n(42),C=n(87),A=n(88);function T(e){return Object(x.jsx)(S.a,{collapseOnSelect:!0,expand:"lg",children:Object(x.jsxs)(C.a,{children:[Object(x.jsx)(S.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(x.jsxs)(S.a.Collapse,{id:"responsive-navbar-nav",children:[Object(x.jsxs)(A.a,{className:"me-auto",children:[Object(x.jsx)(A.a.Link,{children:Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/",children:"Home"})})}),Object(x.jsx)(A.a.Link,{children:Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/admin",children:"Admin"})})})]}),Object(x.jsxs)(A.a,{children:[Object(x.jsx)(A.a.Link,{children:e.isAuth&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/admin",children:"Admin"})}),Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/account",children:"My Account"})})]})}),Object(x.jsx)(S.a.Brand,{children:Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{className:"navbar-brand",to:"/",children:Object(x.jsx)("img",{src:"media/3.png"})})})}),Object(x.jsx)(A.a.Link,{children:Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/articles/drafts",children:"My Drafts"})})}),Object(x.jsx)(A.a.Link,{children:Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/login",children:"Login"})})}),Object(x.jsx)(A.a.Link,{children:Object(x.jsx)("li",{className:"btn-logout",children:Object(x.jsx)("button",{className:"btn btn-link logout",type:"button",onClick:function(){return e.handleLogoutSubmit()},children:"Logout"})})})]})]})]})})}var F=function(e){return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{children:Object(x.jsx)("h3",{children:e.profile})})]})},R=n(67),L=n.n(R),D={drafts:"DRA",submitted:"SUB",published:"PUB",rejected:"REJ"};var P=Object(b.h)((function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),c=n[0],s=n[1];function r(e){return i.apply(this,arguments)}function i(){return(i=Object(j.a)(l.a.mark((function t(n){var a,s,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=c.find((function(e){return e.id===parseInt(n.target.value)})),s={method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":p.a.get("csrftoken")},body:JSON.stringify(a)},t.next=5,fetch("/api_v1/articles/".concat(n.target.value,"/"),s);case 5:if(r=t.sent){t.next=10;break}console.log(r),t.next=15;break;case 10:return e.handleImage(a.image),t.next=13,r.json();case 13:i=t.sent,console.log({data:i});case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){var t=e.match.params.phase,n="/api_v1/articles/";function a(){return(a=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log("articles",a),s(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&(n="/api_v1/articles/?phase=".concat(D[t])),function(){a.apply(this,arguments)}()}),[]);var o=c.filter((function(e){return"DRA"===e.phase}));return Object(x.jsx)("div",{className:"container mt-5",children:Object(x.jsx)("div",{className:"articleholder",children:null===o||void 0===o?void 0:o.map((function(e){return Object(x.jsxs)("div",{className:"content col-8",children:[Object(x.jsxs)("section",{className:"blog-hero-section",children:[Object(x.jsx)("input",{value:e.title}),Object(x.jsx)("input",{value:e.image})]}),Object(x.jsxs)("section",{className:"text",children:[Object(x.jsxs)("p",{style:{fontStyle:"italic"},children:["by ",e.author," ",Object(x.jsx)("br",{})," phase: ",e.phase]}),Object(x.jsx)("input",{value:e.body}),Object(x.jsx)("button",{type:"button",className:"btn btn-success mt-3",name:"DRA",value:e.id,onClick:r,children:"Submit for Publishing"})]})]},e.id)}))})})}));function B(){return Object(x.jsx)("nav",{className:"navbar navbar-expand-lg ",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"collapse navbar-collapse primarynav",id:"navbarResponsive",children:Object(x.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(x.jsx)("li",{className:"nav-item p-3",id:"primary-nav-item",children:Object(x.jsx)(i.b,{to:"/local",children:"Local"})}),Object(x.jsx)("li",{className:"nav-item p-3",id:"primary-nav-item",children:Object(x.jsx)(i.b,{to:"/food",children:"Food"})}),Object(x.jsx)("li",{className:"nav-item p-3",id:"primary-nav-item",children:Object(x.jsx)(i.b,{to:"/travel",children:"Travel"})}),Object(x.jsx)("li",{className:"nav-item p-3",id:"primary-nav-item",children:Object(x.jsx)(i.b,{to:"/fashion",children:"Fashion"})}),Object(x.jsx)("li",{className:"nav-item p-3",id:"primary-nav-item",children:Object(x.jsx)(i.b,{to:"/global",children:"Global"})})]})})})})}var U=Object(b.h)((function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),c=n[0],s=n[1];function r(e){return i.apply(this,arguments)}function i(){return(i=Object(j.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={method:"PUT",headers:{"X-CSRFToken":p.a.get("csrftoken")},body:c.article},e.next=4,fetch("/api_v1/articles/".concat(t.target.value,"/"),n);case 4:if(a=e.sent){e.next=9;break}console.log(a),e.next=12;break;case 9:return e.next=11,a.json();case 11:e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return b.apply(this,arguments)}function b(){return(b=Object(j.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={method:"PUT",headers:{"X-CSRFToken":p.a.get("csrftoken")},body:c.article},e.next=4,fetch("/api_v1/articles/".concat(t.target.value,"/"),n);case 4:if(a=e.sent){e.next=9;break}console.log(a),e.next=12;break;case 9:return e.next=11,a.json();case 11:e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return(h=Object(j.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={method:"PUT",headers:{"X-CSRFToken":p.a.get("csrftoken")},body:c.article},e.next=4,fetch("/api_v1/articles/".concat(t.target.value,"/"),n);case 4:if(a=e.sent){e.next=9;break}console.log(a),e.next=12;break;case 9:return e.next=11,a.json();case 11:e.sent;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var t=e.match.params.phase,n="/api_v1/articles/admin/";function a(){return(a=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log("articles",a),s(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&(n="/api_v1/articles/admin/"),console.log({articleList:c.article}),function(){a.apply(this,arguments)}()}),[]),Object(x.jsx)("div",{className:"container mt-5",children:Object(x.jsx)("div",{className:"articleholder",children:c.map((function(e){return Object(x.jsxs)("div",{className:"content",children:[Object(x.jsxs)("section",{className:"blog-hero-section",children:[Object(x.jsx)("h2",{children:e.title}),Object(x.jsx)("img",{id:"hero-img",src:e.image,alt:"image-for-news-article"})]}),Object(x.jsxs)("section",{className:"text",children:[Object(x.jsxs)("p",{style:{fontStyle:"italic"},children:["by ",e.author," ",Object(x.jsx)("br",{})," phase: ",e.phase]}),Object(x.jsx)("p",{className:"info",children:e.body}),Object(x.jsx)("button",{type:"button",className:"btn btn-success mt-3",name:"SUB",value:"PUB",onClick:r,children:"Publish"}),Object(x.jsx)("button",{type:"button",className:"btn btn-warning mt-3",name:"SUB",value:"REJ",onClick:o,children:"Reject"}),Object(x.jsx)("button",{type:"button",className:"btn btn-primary mt-3",name:"SUB",value:"ARC",onClick:d,children:"Archive"})]})]},e.id)}))})})}));n(3);function _(e){return Object(x.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(x.jsxs)("footer",{style:{display:"flex",bottom:"5px"},children:["\xa92021 made by",Object(x.jsx)("strong",{children:Object(x.jsx)("a",{style:{textDecoration:"none"},href:"https://github.com/kattyeye",children:"kattyeye"})})]})})}var E=function(e){var t=Object(a.useState)(null),n=Object(u.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(null),i=Object(u.a)(r,2),o=i[0],d=i[1],h=Object(b.g)();function m(e){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(l.a.mark((function t(n){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":p.a.get("csrftoken")},body:JSON.stringify(e.user)},t.next=3,fetch("/rest-auth/logout/",a);case 3:if(c=t.sent){t.next=8;break}console.log(c),t.next=15;break;case 8:return console.log(c),t.next=11,c.json();case 11:t.sent,p.a.remove("Authorization"),s(!1),h.push("/login");case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest-auth/user");case 2:e.sent.ok?s(!0):s(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[h]),Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest-auth/user");case 2:(t=e.sent).ok?"admin"==t&&d(!0):d(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[h]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(T,{handleLogoutSubmit:m,isAuth:c}),Object(x.jsx)(B,{}),Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.b,{path:"/registration",children:Object(x.jsx)(k,{})}),Object(x.jsx)(b.b,{path:"/login",children:Object(x.jsx)(w,{isAuth:c,setIsAuth:s})}),Object(x.jsxs)(b.b,{path:"/account",children:[Object(x.jsx)(N,{history:h,isAuth:c}),Object(x.jsx)(F,{isAuth:c}),Object(x.jsx)(L.a,{isAuth:c,handleLogoutSubmit:m})]}),Object(x.jsx)(b.b,{path:"/articles/:phase?",children:Object(x.jsx)(P,{isAuth:c,history:h,handleLogoutSubmit:m})}),Object(x.jsx)(b.b,{path:"/:category?",children:Object(x.jsx)(y,{})}),Object(x.jsx)(b.b,{path:"/admin",children:Object(x.jsx)(U,{isAuth:c,isAdmin:o})})]}),Object(x.jsx)(_,{})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,90)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(i.a,{children:Object(x.jsx)(E,{})})}),document.getElementById("root")),J()}},[[84,1,2]]]);
//# sourceMappingURL=main.f539ee3f.chunk.js.map