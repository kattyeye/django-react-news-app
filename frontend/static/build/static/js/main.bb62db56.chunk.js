(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{32:function(e,t,n){},34:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(22),r=n.n(s),i=(n(31),n(32),n(4)),o=n(2),l=n.n(o),u=n(5),b=n(7),j=(n(34),n(3)),d=n(13),h=n(9),p=n(6),m=n.n(p),x=n(0);var f=n(25),O={drafts:"DRA",submitted:"SUB",published:"PUB",rejected:"REJ"},v={home:"HOM",food:"FOO",fashion:"FAS",local:"LOC",global:"GLO"};var g=Object(j.h)((function(e){var t=Object(a.useState)([]),n=Object(b.a)(t,2),c=n[0],s=n[1];Object(a.useEffect)((function(){var t=e.match.params.category,n=e.match.params.phase,a="/api_v1/articles/";function c(){return(c=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log("articles",n),s(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n&&(a="/api_v1/articles/?phase=".concat(O[n],"/?category=").concat(v[t])),function(){c.apply(this,arguments)}()}),[]);var r=Object(a.useState)([]),i=Object(b.a)(r,2),o=i[0],j=i[1];function d(){var e=o.length+1;j([].concat(Object(f.a)(o),[e]))}return Object(x.jsx)("div",{className:"container mt-5",children:Object(x.jsx)("div",{className:"articleholder",children:c.map((function(e){return Object(x.jsxs)("div",{className:"content ",children:[Object(x.jsxs)("section",{className:"blog-hero-section",children:[Object(x.jsx)("h2",{className:"article-title",children:e.title}),Object(x.jsx)("img",{id:"hero-img",src:e.image,alt:"image-for-news-article"})]}),Object(x.jsxs)("section",{className:"text",children:[Object(x.jsxs)("p",{style:{fontStyle:"italic"},children:["by ",e.author]}),Object(x.jsx)("p",{className:"info",children:e.body})]}),Object(x.jsx)("button",{type:"button",className:"btn btn-primary",children:"Continue Reading"}),Object(x.jsx)("button",{onClick:d,type:"button",className:" btn like-btn",children:1===o.length?o.length+" Like":Object(x.jsxs)("span",{children:[o.length," Likes"]})})]},e.id)}))})})}));function y(e){var t=Object(a.useState)({title:"",author:"",body:"",image:null}),n=Object(b.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(""),i=Object(b.a)(r,2),o=i[0],j=i[1],p=function(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(d.a)({},n,a))}))},f=function(e){console.warn(e)};function O(e){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(l.a.mark((function t(n){var a,r,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),(a=new FormData).append("title",c.title),a.append("body",c.body),a.append("image",c.image),a.append("phase",n.target.value),r={method:"POST",headers:{"X-CSRFToken":m.a.get("csrftoken")},body:a},t.next=9,fetch("/api_v1/articles/",r).catch(f);case 9:if(i=t.sent){t.next=14;break}console.log(i),t.next=18;break;case 14:return t.next=16,i.json();case 16:o=t.sent,s(o);case 18:e.history.push("/drafts");case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("form",{className:"mt-5 col-8 container",children:[Object(x.jsx)("label",{className:"article-form-label",children:"Submit an Article"}),Object(x.jsx)("p",{className:"hear",children:"we want to hear about it."}),Object(x.jsx)("input",{onChange:p,value:c.title,className:"form-control",name:"title",type:"text",placeholder:"Title here."}),Object(x.jsx)("textarea",{onChange:p,value:c.body,className:"form-control",name:"body",type:"text",placeholder:"Body text here."}),Object(x.jsx)("input",{onChange:function(e){var t=e.target.files[0];s(Object(h.a)(Object(h.a)({},c),{},{image:t}));var n=new FileReader;n.onloadend=function(){j(n.result)},n.readAsDataURL(t)},type:"file",className:"form-control"}),c.image&&Object(x.jsx)("img",{src:o,alt:""}),Object(x.jsx)("button",{type:"button",className:"btn btn-save mt-3",name:"DRA",value:"DRA",onClick:O,children:"Save as Draft"}),Object(x.jsx)("button",{type:"button",className:"btn btn-pub mt-3",name:"DRA",value:"SUB",onClick:O,children:"Submit for Publishing"})]})})}function N(e){var t=Object(a.useState)({username:"",email:"",password1:"",password2:""}),n=Object(b.a)(t,2),c=n[0],s=n[1],r=j.g,i=Object(a.useState)(null),o=Object(b.a)(i,2),p=o[0],f=o[1];function O(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(d.a)({},n,a))}))}function v(e){console.warn(e)}function g(){return(g=Object(u.a)(l.a.mark((function e(t){var n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c.password1===c.password2){e.next=5;break}f("Passwords do not match!"),e.next=18;break;case 5:return n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":m.a.get("csrftoken")},body:JSON.stringify(c)},e.next=8,fetch("/rest-auth/registration/",n).catch(v);case 8:if(a=e.sent){e.next=13;break}console.log(a),e.next=18;break;case 13:return e.next=15,a.json();case 15:s=e.sent,m.a.set("Authorization","Token".concat(s.key)),r.push("/");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("form",{className:"mt-3 col-6 ",onSubmit:function(e){return g.apply(this,arguments)},children:[Object(x.jsxs)("div",{className:"form-group text-left mb-3 ",children:[Object(x.jsx)("label",{htmlFor:"username",children:"username"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"enter username.",onChange:O,required:!0,name:"username",value:c.username})]}),Object(x.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(x.jsx)("label",{htmlFor:"email",children:"email"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"email",placeholder:"enter email.",onChange:O,required:!0,name:"email",value:c.email})]}),Object(x.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(x.jsx)("label",{htmlFor:"password1",children:"password"}),Object(x.jsx)("input",{type:"password",className:"form-control",id:"password1",placeholder:"enter password.",onChange:O,required:!0,name:"password1",value:c.password1})]}),Object(x.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(x.jsx)("label",{htmlFor:"password2",children:"confirm password"}),Object(x.jsx)("input",{type:"password",className:"form-control",id:"password2",placeholder:"confirm password.",onChange:O,required:!0,name:"password2",value:c.password2}),p&&Object(x.jsx)("span",{className:"text-danger",children:p})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Register"})]})})}var k=Object(j.h)((function(e){var t=Object(a.useState)({username:"",password:""}),n=Object(b.a)(t,2),c=n[0],s=n[1];function r(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(d.a)({},n,a))}))}function i(e){console.warn(e)}function o(){return(o=Object(u.a)(l.a.mark((function t(n){var a,s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":m.a.get("csrftoken")},body:JSON.stringify(c)},t.next=4,fetch("/rest-auth/login/",a).catch(i);case 4:if(s=t.sent){t.next=9;break}console.log(s),t.next=14;break;case 9:return t.next=11,s.json();case 11:r=t.sent,m.a.set("Authorization","Token".concat(r.key)),e.setIsAuth(!0);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(x.jsxs)("form",{className:"mt-3 col-6 container",onSubmit:function(e){return o.apply(this,arguments)},children:[Object(x.jsx)("div",{className:"form-group text-left mb-3",children:Object(x.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"enter username.",onChange:r,required:!0,name:"username",value:c.username})}),Object(x.jsx)("div",{className:"form-group text-left mb-3",children:Object(x.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"enter password.",onChange:r,required:!0,name:"password",value:c.password})}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Login"}),Object(x.jsx)("button",{type:"button",className:"btn btn-primary mt-3 register-here-button",onClick:function(){e.history.push("/registration")},children:"Click to register."})]})}));function w(e){return Object(x.jsx)("nav",{className:"navbar navbar-expand-lg ",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:Object(x.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/",children:"Home"})}),Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/articles/admin",children:"Admin"})}),Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/account",children:"My Account"})}),Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{className:"navbar-brand",to:"/",children:Object(x.jsx)("img",{src:"media/3.png"})})}),Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/login",children:"Login"})}),Object(x.jsx)("li",{className:"nav-item secondary-nav-item p-3",children:Object(x.jsx)(i.b,{to:"/articles/drafts",children:"My Drafts"})}),Object(x.jsx)("li",{className:"btn-logout",children:Object(x.jsx)("button",{className:"btn btn-link logout",type:"button",onClick:function(){return e.handleLogoutSubmit()},children:"Logout"})})]})})})})}var S=function(e){return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{children:Object(x.jsx)("h3",{children:e.profile})})]})};var C=Object(j.h)((function(e){return Object(x.jsx)("div",{})})),R={drafts:"DRA",submitted:"SUB",published:"PUB",rejected:"REJ"};var T=Object(j.h)((function(e){var t=Object(a.useState)([]),n=Object(b.a)(t,2),c=n[0],s=n[1];function r(e){return i.apply(this,arguments)}function i(){return(i=Object(u.a)(l.a.mark((function t(n){var a,s,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=c.find((function(e){return e.id===parseInt(n.target.value)})),s={method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":m.a.get("csrftoken")},body:JSON.stringify(a)},t.next=5,fetch("/api_v1/articles/".concat(n.target.value,"/"),s);case 5:if(r=t.sent){t.next=10;break}console.log(r),t.next=15;break;case 10:return e.handleImage(a.image),t.next=13,r.json();case 13:i=t.sent,console.log({data:i});case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){var t=e.match.params.phase,n="/api_v1/articles/";function a(){return(a=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log("articles",a),s(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&(n="/api_v1/articles/?phase=".concat(R[t])),function(){a.apply(this,arguments)}()}),[]);var o=c.filter((function(e){return"DRA"===e.phase}));return Object(x.jsx)("div",{className:"container mt-5",children:Object(x.jsx)("div",{className:"articleholder",children:null===o||void 0===o?void 0:o.map((function(e){return Object(x.jsxs)("div",{className:"content col-8",children:[Object(x.jsxs)("section",{className:"blog-hero-section",children:[Object(x.jsx)("input",{value:e.title}),Object(x.jsx)("input",{value:e.image})]}),Object(x.jsxs)("section",{className:"text",children:[Object(x.jsxs)("p",{style:{fontStyle:"italic"},children:["by ",e.author," ",Object(x.jsx)("br",{})," phase: ",e.phase]}),Object(x.jsx)("input",{value:e.body}),Object(x.jsx)("button",{type:"button",className:"btn btn-success mt-3",name:"DRA",value:e.id,onClick:r,children:"Submit for Publishing"})]})]},e.id)}))})})}));function A(){return Object(x.jsx)("nav",{className:"navbar navbar-expand-lg ",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"collapse navbar-collapse primarynav",id:"navbarResponsive",children:Object(x.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(x.jsx)("li",{className:"nav-item p-3",id:"primary-nav-item",children:Object(x.jsx)(i.b,{to:"/local",children:"Local"})}),Object(x.jsx)("li",{className:"nav-item p-3",id:"primary-nav-item",children:Object(x.jsx)(i.b,{to:"/food",children:"Food"})}),Object(x.jsx)("li",{className:"nav-item p-3",id:"primary-nav-item",children:Object(x.jsx)(i.b,{to:"/travel",children:"Travel"})}),Object(x.jsx)("li",{className:"nav-item p-3",id:"primary-nav-item",children:Object(x.jsx)(i.b,{to:"/fashion",children:"Fashion"})}),Object(x.jsx)("li",{className:"nav-item p-3",id:"primary-nav-item",children:Object(x.jsx)(i.b,{to:"/global",children:"Global"})})]})})})})}var F=Object(j.h)((function(e){var t=Object(a.useState)([]),n=Object(b.a)(t,2);function c(e){return s.apply(this,arguments)}function s(){return(s=Object(u.a)(l.a.mark((function t(n){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={method:"PUT",headers:{"X-CSRFToken":m.a.get("csrftoken")},body:e.articleList.article},t.next=4,fetch("/api_v1/articles/".concat(n.target.value,"/"),a);case 4:if(c=t.sent){t.next=9;break}console.log(c),t.next=12;break;case 9:return t.next=11,c.json();case 11:t.sent;case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function r(e){return i.apply(this,arguments)}function i(){return(i=Object(u.a)(l.a.mark((function t(n){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={method:"PUT",headers:{"X-CSRFToken":m.a.get("csrftoken")},body:e.articleList.article},t.next=4,fetch("/api_v1/articles/".concat(n.target.value,"/"),a);case 4:if(c=t.sent){t.next=9;break}console.log(c),t.next=12;break;case 9:return t.next=11,c.json();case 11:t.sent;case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(e){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(l.a.mark((function t(n){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={method:"PUT",headers:{"X-CSRFToken":m.a.get("csrftoken")},body:e.articleList.article},t.next=4,fetch("/api_v1/articles/".concat(n.target.value,"/"),a);case 4:if(c=t.sent){t.next=9;break}console.log(c),t.next=12;break;case 9:return t.next=11,c.json();case 11:t.sent;case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return n[0],n[1],Object(a.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api_v1/articles/admin/");case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,console.log("articles",a),e.setArticleList(a);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(x.jsx)("div",{className:"container mt-5",children:Object(x.jsx)("div",{className:"articleholder",children:e.articleList.map((function(e){return Object(x.jsxs)("div",{className:"content",children:[Object(x.jsxs)("section",{className:"blog-hero-section",children:[Object(x.jsx)("h2",{children:e.title}),Object(x.jsx)("img",{id:"hero-img",src:e.image,alt:"image-for-news-article"})]}),Object(x.jsxs)("section",{className:"text",children:[Object(x.jsxs)("p",{style:{fontStyle:"italic"},children:["by ",e.author," ",Object(x.jsx)("br",{})," phase: ",e.phase]}),Object(x.jsx)("p",{className:"info",children:e.body}),Object(x.jsx)("button",{type:"button",className:"btn btn-success mt-3",name:"SUB",value:"PUB",onClick:c,children:"Publish"}),Object(x.jsx)("button",{type:"button",className:"btn btn-warning mt-3",name:"SUB",value:"REJ",onClick:r,children:"Reject"}),Object(x.jsx)("button",{type:"button",className:"btn btn-primary mt-3",name:"SUB",value:"ARC",onClick:o,children:"Archive"})]})]},e.id)}))})})}));n(26);var L=function(e){var t=Object(a.useState)(null),n=Object(b.a)(t,2),c=n[0],s=n[1],r=Object(j.g)();function i(e){return o.apply(this,arguments)}function o(){return(o=Object(u.a)(l.a.mark((function t(n){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":m.a.get("csrftoken")},body:JSON.stringify(e.user)},t.next=3,fetch("/rest-auth/logout/",a);case 3:if(c=t.sent){t.next=8;break}console.log(c),t.next=15;break;case 8:return console.log(c),t.next=11,c.json();case 11:t.sent,m.a.remove("Authorization"),s(!1),r.push("/login");case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest-auth/user");case 2:e.sent.ok?s(!0):s(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[r]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(w,{handleLogoutSubmit:i}),Object(x.jsx)(A,{}),Object(x.jsxs)(j.d,{children:[Object(x.jsx)(j.b,{path:"/registration",children:Object(x.jsx)(N,{})}),Object(x.jsx)(j.b,{path:"/login",children:Object(x.jsx)(k,{isAuth:c,setIsAuth:s})}),Object(x.jsxs)(j.b,{path:"/account",children:[Object(x.jsx)(y,{history:r,isAuth:c}),Object(x.jsx)(S,{isAuth:c}),Object(x.jsx)(C,{isAuth:c,handleLogoutSubmit:i})]}),Object(x.jsx)(j.b,{path:"/articles/:phase?/:category?",children:Object(x.jsx)(T,{isAuth:c,history:r,handleLogoutSubmit:i})}),Object(x.jsx)(j.b,{path:"/articles/published/:category?",children:Object(x.jsx)(g,{})}),Object(x.jsx)(j.b,{path:"/",children:Object(x.jsx)(g,{})}),Object(x.jsx)(j.b,{path:"/articles/admin",children:Object(x.jsx)(F,{})})]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(i.a,{children:Object(x.jsx)(L,{})})}),document.getElementById("root")),D()}},[[41,1,2]]]);
//# sourceMappingURL=main.bb62db56.chunk.js.map